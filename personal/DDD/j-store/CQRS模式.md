# 什么是CQRS
CQRS的全称是 Command Query Responsibility Segregation(命令、查询职责分离)，它是**一种将数据的读取和更新操作分离的模式**。CQRS可以使应用程序提升性能，以及提高可扩展性和安全性。

这里提到的命令和查询，它们之间最显著的特点或者差别是：命令是有副作用的，它会改变系统状态。而查询是无副作用的，只会读取系统中的数据。在项目中，通常使用不同的模块实现这两部分功能。并且如果存在依赖关系，通常是查询模块依赖命令模块。

# 背景
在传统的做法中，一般会使用同一个数据模型进行查询和写入更新数据库操作。一般的CRUD操作情况下不会有什么问题。但在业务场景比较复杂的情况下，可能会使应用在查询和写入的逻辑都变得复杂以至于难以维护。在查询读取方面，应用可能会执行大量不同的查询，返回不同的DTO对象，对象的映射逻辑就可能会变得复杂。

并且由于写入和读取的工作负载要求通常是非对称的。写入场景希望数据较少的冗余，以提升写入性能。而读取场景希望数据有适当的冗余，以提升查询性能。比如说适当冗余数据，以避免太多的链表查询或查询次数。

# CORS如何解决这个问题
定义：CORS将读取和写入分离到不同的模块中，(Command)命令模块负责写入，（Query）查询模块负责查询读取。

- 命令模块是基于任务(task-base)的，而不是以数据为中心。比如说"创建订单"命令



> |**Command**|
> |-------|
> |对象少|
> |对象间形成树或者图结构|
> |避免数据的冗余|
> |ACID比较重要|
> 
> |**Query**|
> |-----|
> |对象多|
> |对象之间关联只有查询用的|
> |大量冗余以提升查询性能|
> |ACID不重要|

